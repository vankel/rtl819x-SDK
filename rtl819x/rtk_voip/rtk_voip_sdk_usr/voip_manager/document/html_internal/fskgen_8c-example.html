<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIP Interface: Main Page2</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<img src=realtek.jpg>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">fskgen.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example for FSK Caller ID Generation</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="voip__manager_8h.html" title="VoIP control API.">voip_manager.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Gain2Val(<span class="keywordtype">int</span> gain);</div>
<div class="line"><span class="keywordtype">int</span> Val2Gain(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> test_P(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a name="_a0"></a><a class="code" href="structTstVoipFskPara.html" title="For fsk caller id gen para setting.">TstVoipFskPara</a> para;</div>
<div class="line">    TstFskClid clid;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the Current setting</span></div>
<div class="line">    para.<a name="a1"></a><a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = 0;</div>
<div class="line">    para.<a name="a2"></a><a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = 1; <span class="comment">// Bellcore</span></div>
<div class="line">    rtk_Get_FSK_CLID_Para(&amp;para);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Change the params</span></div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = 0;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = 1; <span class="comment">// Bellcore</span></div>
<div class="line">    para.<a name="a3"></a><a class="code" href="structTstVoipFskPara.html#a030c5ac2cce1207f91ca8eac3ca4d8ae" title="channel seizure signal bit count">CS_cnt</a> = 300;</div>
<div class="line">    para.<a name="a4"></a><a class="code" href="structTstVoipFskPara.html#a0ff1b37b0dfcf0cf08f7d81fa004e78b" title="mark signal bit count">mark_cnt</a> = 80;</div>
<div class="line">    para.<a name="a5"></a><a class="code" href="structTstVoipFskPara.html#a0d42d27c254156a1da82843505162fc0" title="unit in dB">mark_gain</a> = 0xE;</div>
<div class="line">    para.<a name="a6"></a><a class="code" href="structTstVoipFskPara.html#a5e902b8ff9dcbad2e459e4bbfb61712a" title="unit in dB">space_gain</a> = 0xE;</div>
<div class="line">            </div>
<div class="line">    rtk_Set_FSK_CLID_Para(&amp;para);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Gen FSK Caller ID</span></div>
<div class="line">    clid.ch_id = 0;</div>
<div class="line">        clid.service_type = 0; <span class="comment">//service type 1</span></div>
<div class="line"></div>
<div class="line">    clid.cid_data[0].type = 0x04;</div>
<div class="line">    strcpy(clid.cid_data[0].data, <span class="stringliteral">&quot;P&quot;</span>); <span class="comment">//CLI</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Set other element to 0 (MUST)</span></div>
<div class="line">    clid.cid_data[1].type = 0;              </div>
<div class="line">    clid.cid_data[2].type = 0;</div>
<div class="line">    clid.cid_data[3].type = 0;</div>
<div class="line">        clid.cid_data[4].type = 0;</div>
<div class="line"></div>
<div class="line">    <a name="a7"></a><a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(0, &amp;clid, 1);</div>
<div class="line">        </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> test_O(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structTstVoipFskPara.html" title="For fsk caller id gen para setting.">TstVoipFskPara</a> para;</div>
<div class="line">    TstFskClid clid;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the Current setting</span></div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = 0;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = 1; <span class="comment">// Bellcore</span></div>
<div class="line">    rtk_Get_FSK_CLID_Para(&amp;para);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Change the params</span></div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = 0;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = 1; <span class="comment">// Bellcore</span></div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a030c5ac2cce1207f91ca8eac3ca4d8ae" title="channel seizure signal bit count">CS_cnt</a> = 300;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a0ff1b37b0dfcf0cf08f7d81fa004e78b" title="mark signal bit count">mark_cnt</a> = 80;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a0d42d27c254156a1da82843505162fc0" title="unit in dB">mark_gain</a> = 0xE;</div>
<div class="line">    para.<a class="code" href="structTstVoipFskPara.html#a5e902b8ff9dcbad2e459e4bbfb61712a" title="unit in dB">space_gain</a> = 0xE;</div>
<div class="line">            </div>
<div class="line">    rtk_Set_FSK_CLID_Para(&amp;para);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Gen FSK Caller ID</span></div>
<div class="line">    clid.ch_id = 0;</div>
<div class="line">        clid.service_type = 0; <span class="comment">//service type 1</span></div>
<div class="line"></div>
<div class="line">    clid.cid_data[0].type = 0x04;</div>
<div class="line">    strcpy(clid.cid_data[0].data, <span class="stringliteral">&quot;O&quot;</span>); <span class="comment">//CLI</span></div>
<div class="line">        </div>
<div class="line">    clid.cid_data[1].type = 0x01;       <span class="comment">// DATE_TIME</span></div>
<div class="line">        strcpy(clid.cid_data[1].data, <span class="stringliteral">&quot;01020304&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set other element to 0 (MUST)</span></div>
<div class="line">    <span class="comment">//clid.cid_data[1].type = 0;                </span></div>
<div class="line">    clid.cid_data[2].type = 0;</div>
<div class="line">    clid.cid_data[3].type = 0;</div>
<div class="line">        clid.cid_data[4].type = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(0, &amp;clid, 1);</div>
<div class="line">        </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (argc == 7)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (atoi(argv[3]) == 1)<span class="comment">//type I</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//DSP default is soft gen, no need to set soft gen mode</span></div>
<div class="line">            <a name="a8"></a><a class="code" href="group__TAPI__DSP__CID__FSK.html#ga268000217281f9636bc5179561d8c1aa" title="Set the FSK Area.">rtk_SetFskArea</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, atoi(argv[2])<span class="comment">/*area*/</span>);   <span class="comment">/* area -&gt; 0:Bellcore 1:ETSI 2:BT 3:NTT */</span></div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="comment">// API to gen FSK caller ID and auto ring by DSP</span></div>
<div class="line">            <a name="a9"></a><a class="code" href="group__TAPI__DSP__CID__FSK.html#gac8dd91003de0d7c50e371540e9d67dbb" title="FSK Caller ID Generation.">rtk_GenFskCid</a>(atoi(argv[1]), argv[4]<span class="comment">/*cid*/</span>, argv[6], argv[5]<span class="comment">/*name*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#elif 0</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="comment">// API to gen caller ID and auto ring by DSP</span></div>
<div class="line">            <a name="a10"></a><a class="code" href="group__TAPI__DSP__CID.html#gac3319ca02ce9b01bde5be337766080bd" title="Caller ID generation and FXS Ring.">rtk_GenCidAndFxsRing</a>(atoi(argv[1]), 1<span class="comment">/*fsk*/</span>, argv[4], argv[6], argv[5]<span class="comment">/*name*/</span>, 0<span class="comment">/*type1*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="comment">//FSK_PARAM_NULL = 0,</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_DATEnTIME = 0x01,   // Date and Time</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_CLI = 0x02,     // Calling Line Identify (CLI)</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_CLI_ABS = 0x04, // Reason for absence of CLI</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_CLI_NAME = 0x07,    // Calling Line Identify (CLI) Name</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_CLI_NAME_ABS = 0x08,    // Reason for absence of (CLI) Name</span></div>
<div class="line">            <span class="comment">//FSK_PARAM_MW = 0x0b,      // Message Waiting</span></div>
<div class="line">    </div>
<div class="line">            TstFskClid clid;</div>
<div class="line">    </div>
<div class="line">            clid.ch_id = atoi(argv[1]);</div>
<div class="line">            clid.service_type = 0; <span class="comment">//service type 1</span></div>
<div class="line">        </div>
<div class="line">            clid.cid_data[0].type = 0x01;</div>
<div class="line">            strcpy(clid.cid_data[0].data, argv[6]);<span class="comment">//DATE</span></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[4][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[4][0] == <span class="charliteral">&#39;O&#39;</span>) ) <span class="comment">//Private or Out of area</span></div>
<div class="line">                clid.cid_data[1].type = 0x04;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[1].type = 0x02;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[1].data, argv[4]); <span class="comment">//CLI</span></div>
<div class="line">                </div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[5][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[5][0] == <span class="charliteral">&#39;O&#39;</span>) ) <span class="comment">//Private or Out of area</span></div>
<div class="line">                clid.cid_data[2].type = 0x08;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[2].type = 0x07;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[2].data, argv[5]); <span class="comment">//CLI_NAME</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">//Only 3 elements for Caller ID data. Set other element to 0 (MUST)</span></div>
<div class="line">            clid.cid_data[3].type = 0;</div>
<div class="line">            clid.cid_data[4].type = 0;</div>
<div class="line">            </div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, &amp;clid, 3);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atoi(argv[3]) == 2)<span class="comment">//type II</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//DSP default is soft gen, no need to set soft gen mode</span></div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga268000217281f9636bc5179561d8c1aa" title="Set the FSK Area.">rtk_SetFskArea</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, atoi(argv[2])<span class="comment">/*area*/</span>);   <span class="comment">/* area -&gt; 0:Bellcore 1:ETSI 2:BT 3:NTT */</span></div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID__FSK.html#gac8dd91003de0d7c50e371540e9d67dbb" title="FSK Caller ID Generation.">rtk_GenFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, argv[4]<span class="comment">/*cid*/</span>, argv[6], argv[5]<span class="comment">/*name*/</span>, 1);</div>
<div class="line"><span class="preprocessor">#elif 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID.html#gac3319ca02ce9b01bde5be337766080bd" title="Caller ID generation and FXS Ring.">rtk_GenCidAndFxsRing</a>(atoi(argv[1]), 1<span class="comment">/*fsk*/</span>, argv[4], argv[6], argv[5]<span class="comment">/*name*/</span>, 1<span class="comment">/*type1*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            TstFskClid clid;</div>
<div class="line">    </div>
<div class="line">            clid.ch_id = atoi(argv[1]);</div>
<div class="line">            clid.service_type = 1;  <span class="comment">//service type 2</span></div>
<div class="line">    </div>
<div class="line">            clid.cid_data[0].type = 0x01;</div>
<div class="line">            strcpy(clid.cid_data[0].data, argv[6]); <span class="comment">//DATE</span></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[4][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[4][0] == <span class="charliteral">&#39;O&#39;</span>) ) <span class="comment">//Private or Out of area</span></div>
<div class="line">                clid.cid_data[1].type = 0x04;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[1].type = 0x02;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[1].data, argv[4]); <span class="comment">//CLI</span></div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[5][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[5][0] == <span class="charliteral">&#39;O&#39;</span>) ) <span class="comment">//Private or Out of area</span></div>
<div class="line">                clid.cid_data[2].type = 0x08;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[2].type = 0x07;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[2].data, argv[5]); <span class="comment">//CLI_NAME</span></div>
<div class="line">    </div>
<div class="line">            <span class="comment">//Only 3 elements for Caller ID data. Set other element to 0 (MUST)</span></div>
<div class="line">            clid.cid_data[3].type = 0;</div>
<div class="line">            clid.cid_data[4].type = 0;</div>
<div class="line">            </div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, &amp;clid, 3);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;wrong fsk type: should be type-I(1) or type-II(2)\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 5)<span class="comment">// no name, date, time</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (atoi(argv[3]) == 1)<span class="comment">//type I</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga268000217281f9636bc5179561d8c1aa" title="Set the FSK Area.">rtk_SetFskArea</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, atoi(argv[2])<span class="comment">/*area*/</span>);   <span class="comment">/* area -&gt; 0:Bellcore 1:ETSI 2:BT 3:NTT */</span></div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID__FSK.html#gac8dd91003de0d7c50e371540e9d67dbb" title="FSK Caller ID Generation.">rtk_GenFskCid</a>(atoi(argv[1]), argv[4]<span class="comment">/*cid*/</span>, 0<span class="comment">/*date*/</span>, 0<span class="comment">/*name*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#elif 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID.html#gac3319ca02ce9b01bde5be337766080bd" title="Caller ID generation and FXS Ring.">rtk_GenCidAndFxsRing</a>(atoi(argv[1]), 1<span class="comment">/*fsk*/</span>, argv[4], 0<span class="comment">/*date*/</span>, 0<span class="comment">/*name*/</span>, 0<span class="comment">/*type1*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            TstFskClid clid;</div>
<div class="line">    </div>
<div class="line">            clid.ch_id = atoi(argv[1]);</div>
<div class="line">            clid.service_type = 0;  <span class="comment">//service type 1</span></div>
<div class="line">        </div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[4][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[4][0] == <span class="charliteral">&#39;O&#39;</span>) )</div>
<div class="line">                clid.cid_data[0].type = 0x04;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[0].type = 0x02;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[0].data, argv[4]); <span class="comment">//CLI</span></div>
<div class="line"></div>
<div class="line">            clid.cid_data[1].type = 0;              </div>
<div class="line">            clid.cid_data[2].type = 0;</div>
<div class="line">            clid.cid_data[3].type = 0;</div>
<div class="line">            clid.cid_data[4].type = 0;</div>
<div class="line"></div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, &amp;clid, 1);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atoi(argv[3]) == 2)<span class="comment">//type II</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga268000217281f9636bc5179561d8c1aa" title="Set the FSK Area.">rtk_SetFskArea</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, atoi(argv[2])<span class="comment">/*area*/</span>);   <span class="comment">/* area -&gt; 0:Bellcore 1:ETSI 2:BT 3:NTT */</span></div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID__FSK.html#gac8dd91003de0d7c50e371540e9d67dbb" title="FSK Caller ID Generation.">rtk_GenFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, argv[4]<span class="comment">/*cid*/</span>, 0<span class="comment">/*date*/</span>, 0<span class="comment">/*name*/</span>, 1);</div>
<div class="line"><span class="preprocessor">#elif 0</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="group__TAPI__DSP__CID.html#gac3319ca02ce9b01bde5be337766080bd" title="Caller ID generation and FXS Ring.">rtk_GenCidAndFxsRing</a>(atoi(argv[1]), 1<span class="comment">/*fsk*/</span>, argv[4], 0<span class="comment">/*date*/</span>, 0<span class="comment">/*name*/</span>, 1<span class="comment">/*type1*/</span>, 0);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            TstFskClid clid;</div>
<div class="line">    </div>
<div class="line">            clid.ch_id = atoi(argv[1]);</div>
<div class="line">            clid.service_type = 1;   <span class="comment">//service type 2</span></div>
<div class="line">        </div>
<div class="line">            <span class="keywordflow">if</span> ( (argv[4][0] == <span class="charliteral">&#39;P&#39;</span>) || (argv[4][0] == <span class="charliteral">&#39;O&#39;</span>) )</div>
<div class="line">                clid.cid_data[0].type = 0x04;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                clid.cid_data[0].type = 0x02;</div>
<div class="line"></div>
<div class="line">            strcpy(clid.cid_data[0].data, argv[4]);</div>
<div class="line">                </div>
<div class="line">            clid.cid_data[1].type = 0;              </div>
<div class="line">            clid.cid_data[2].type = 0;</div>
<div class="line">            clid.cid_data[3].type = 0;</div>
<div class="line">            clid.cid_data[4].type = 0;</div>
<div class="line"></div>
<div class="line">            <a class="code" href="group__TAPI__DSP__CID__FSK.html#ga3830779e689344c81a1cf6f15b1c417d" title="FSK Caller ID Generation.">rtk_GenMdmfFskCid</a>(atoi(argv[1])<span class="comment">/*chid*/</span>, &amp;clid, 1);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;wrong fsk type: should be type-I(1) or type-II(2)\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( argc == 19 ) || ( argc == 21 ) ) <span class="comment">/* set */</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structTstVoipFskPara.html" title="For fsk caller id gen para setting.">TstVoipFskPara</a> para;</div>
<div class="line">        <span class="keywordtype">int</span> mark_gain;</div>
<div class="line">        <span class="keywordtype">int</span> space_gain;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (argv[1][0] == <span class="charliteral">&#39;s&#39;</span>) <span class="comment">//set para</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">/* check Gain range */</span></div>
<div class="line">            mark_gain = atoi(argv[6]);</div>
<div class="line">            space_gain = atoi(argv[7]);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (mark_gain&lt;-16 || mark_gain&gt;8) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;\ninvalid mark_gain  : %d\n&quot;</span>,mark_gain);</div>
<div class="line">                printf(<span class="stringliteral">&quot;Range of mark_gain : -16dB ~ +8dB\n\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (space_gain&lt;-16 || space_gain&gt;8) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;\ninvalid space_gain  : %d\n&quot;</span>,space_gain);</div>
<div class="line">                printf(<span class="stringliteral">&quot;Range of space_gain : -16dB ~ +8dB\n\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = atoi(argv[2]);</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = atoi(argv[3]);</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a030c5ac2cce1207f91ca8eac3ca4d8ae" title="channel seizure signal bit count">CS_cnt</a> = atoi(argv[4]);</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a0ff1b37b0dfcf0cf08f7d81fa004e78b" title="mark signal bit count">mark_cnt</a> = atoi(argv[5]);</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a0d42d27c254156a1da82843505162fc0" title="unit in dB">mark_gain</a> = Gain2Val(atoi(argv[6]));</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a5e902b8ff9dcbad2e459e4bbfb61712a" title="unit in dB">space_gain</a> = Gain2Val(atoi(argv[7]));</div>
<div class="line">            para.<a name="a11"></a><a class="code" href="structTstVoipFskPara.html#a641e90d2ce11bb5ad2bbe52bbda821be" title="DTMF A, or B, or C, or D.">type2_expected_ack_tone</a> = argv[8][0];</div>
<div class="line">            para.<a name="a12"></a><a class="code" href="structTstVoipFskPara.html#a120d8b8642f556e6eb54c0ee077baaf5" title="unit in ms">delay_after_1st_ring</a> = atoi(argv[9]);</div>
<div class="line">            para.<a name="a13"></a><a class="code" href="structTstVoipFskPara.html#a4497a7464cf7e9c1050eb60f1e5ed7cf" title="unit in ms">delay_before_2nd_ring</a> = atoi(argv[10]);</div>
<div class="line">            para.<a name="a14"></a><a class="code" href="structTstVoipFskPara.html#a500c1c9fafd7217f05fcb5d15c69e7e4" title="unit in ms">silence_before_sas</a> = atoi(argv[11]);</div>
<div class="line">            para.<a name="a15"></a><a class="code" href="structTstVoipFskPara.html#a1315cc2583de6b687660fb49c5a00fe2" title="unit in ms">sas_time</a> = atoi(argv[12]);</div>
<div class="line">            para.<a name="a16"></a><a class="code" href="structTstVoipFskPara.html#a6e63808f8236ab10ae05a53b31628ad1" title="unit in ms">delay_after_sas</a> = atoi(argv[13]);</div>
<div class="line">            para.<a name="a17"></a><a class="code" href="structTstVoipFskPara.html#acd1797e90d6f9afc770f00858d8abac3" title="unit in ms">cas_time</a> = atoi(argv[14]);</div>
<div class="line">            para.<a name="a18"></a><a class="code" href="structTstVoipFskPara.html#a367786fc4153179f0971bb94409426b5" title="unit in ms">type1_delay_after_cas</a> = atoi(argv[15]);</div>
<div class="line">            para.<a name="a19"></a><a class="code" href="structTstVoipFskPara.html#ad7ec95fcbd92524d677e015c5eee962c" title="unit in ms">ack_waiting_time</a> = atoi(argv[16]);</div>
<div class="line">            para.<a name="a20"></a><a class="code" href="structTstVoipFskPara.html#a9698ba24f9b00aa469b16f320e18bde8" title="unit in ms">delay_after_ack_recv</a> = atoi(argv[17]);</div>
<div class="line">            para.<a name="a21"></a><a class="code" href="structTstVoipFskPara.html#a161b5951c5f493ced6e679b7848ce71e" title="unit in ms, range 40~640ms">delay_after_type2_fsk</a> = atoi(argv[18]);</div>
<div class="line">            <span class="keywordflow">if</span>( para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> == FSK_ETSI )</div>
<div class="line">            {</div>
<div class="line">                para.<a name="a22"></a><a class="code" href="structTstVoipFskPara.html#a4a423950b129bbf1268b7bcbdf43fe89" title="The duration of RP-AS 200ms~300ms (may extend to 450ms):ETSI.">RPAS_Duration</a> = atoi(argv[19]);</div>
<div class="line">                para.<a name="a23"></a><a class="code" href="structTstVoipFskPara.html#a93f69fdb896784463c847bfd7de76a27" title="From end of RP-AS to start of FSK data transmission (T3:ETSI)">RPAS2FSK_Period</a> = atoi(argv[20]);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {           </div>
<div class="line">                para.<a class="code" href="structTstVoipFskPara.html#a4a423950b129bbf1268b7bcbdf43fe89" title="The duration of RP-AS 200ms~300ms (may extend to 450ms):ETSI.">RPAS_Duration</a> = 250;</div>
<div class="line">                para.<a class="code" href="structTstVoipFskPara.html#a93f69fdb896784463c847bfd7de76a27" title="From end of RP-AS to start of FSK data transmission (T3:ETSI)">RPAS2FSK_Period</a> = 650;</div>
<div class="line">            }</div>
<div class="line">            rtk_Set_FSK_CLID_Para(&amp;para);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 4) </div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structTstVoipFskPara.html" title="For fsk caller id gen para setting.">TstVoipFskPara</a> para;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (argv[1][0] == <span class="charliteral">&#39;g&#39;</span>) <span class="comment">//get para</span></div>
<div class="line">        {</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a> = atoi(argv[2]);</div>
<div class="line">            para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> = atoi(argv[3]);</div>
<div class="line">            </div>
<div class="line">            rtk_Get_FSK_CLID_Para(&amp;para);</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;FSK parameters of chid %d\n&quot;</span>,para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot;=======================================\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">switch</span>(para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a>) {</div>
<div class="line">                <span class="keywordflow">case</span> FSK_Bellcore: </div>
<div class="line">                    printf(<span class="stringliteral">&quot; - fsk_area = Bellcore/Telcordia FSK\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> FSK_ETSI: </div>
<div class="line">                    printf(<span class="stringliteral">&quot; - fsk_area = ETSI FSK\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> FSK_BT: </div>
<div class="line">                    printf(<span class="stringliteral">&quot; - fsk_area = BT FSK\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> FSK_NTT: </div>
<div class="line">                    printf(<span class="stringliteral">&quot; - fsk_area = NTT FSK\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    printf(<span class="stringliteral">&quot; - fsk_area = %d\n&quot;</span>,para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            printf(<span class="stringliteral">&quot; - ch seizure cnt           = %4d bits\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a030c5ac2cce1207f91ca8eac3ca4d8ae" title="channel seizure signal bit count">CS_cnt</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - mark cnt                 = %4d bits\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a0ff1b37b0dfcf0cf08f7d81fa004e78b" title="mark signal bit count">mark_cnt</a>);</div>
<div class="line">            <span class="comment">//printf(&quot; - mark value               = %4d\n&quot;, para.mark_gain);</span></div>
<div class="line">            printf(<span class="stringliteral">&quot; - mark  (Logic 1) +/-gain  = %4d dB\n&quot;</span>, Val2Gain(para.<a class="code" href="structTstVoipFskPara.html#a0d42d27c254156a1da82843505162fc0" title="unit in dB">mark_gain</a>));</div>
<div class="line">            <span class="comment">//printf(&quot; - space value              = %4d\n&quot;, para.space_gain);</span></div>
<div class="line">            printf(<span class="stringliteral">&quot; - space (Logic 0) +/-gain  = %4d dB\n&quot;</span>, Val2Gain(para.<a class="code" href="structTstVoipFskPara.html#a5e902b8ff9dcbad2e459e4bbfb61712a" title="unit in dB">space_gain</a>));</div>
<div class="line">            printf(<span class="stringliteral">&quot; - type2_expected_ack_tone  = %4C\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a641e90d2ce11bb5ad2bbe52bbda821be" title="DTMF A, or B, or C, or D.">type2_expected_ack_tone</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - delay_after_1st_ring     = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a120d8b8642f556e6eb54c0ee077baaf5" title="unit in ms">delay_after_1st_ring</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - delay_before_2nd_ring    = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a4497a7464cf7e9c1050eb60f1e5ed7cf" title="unit in ms">delay_before_2nd_ring</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - silence_before_sas       = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a500c1c9fafd7217f05fcb5d15c69e7e4" title="unit in ms">silence_before_sas</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - sas_time                 = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a1315cc2583de6b687660fb49c5a00fe2" title="unit in ms">sas_time</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - delay_after_sas          = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a6e63808f8236ab10ae05a53b31628ad1" title="unit in ms">delay_after_sas</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - cas_time                 = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#acd1797e90d6f9afc770f00858d8abac3" title="unit in ms">cas_time</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - type1_delay_after_cas    = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a367786fc4153179f0971bb94409426b5" title="unit in ms">type1_delay_after_cas</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - ack_waiting_time         = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#ad7ec95fcbd92524d677e015c5eee962c" title="unit in ms">ack_waiting_time</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - delay_after_ack_recv     = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a9698ba24f9b00aa469b16f320e18bde8" title="unit in ms">delay_after_ack_recv</a>);</div>
<div class="line">            printf(<span class="stringliteral">&quot; - delay_after_type2_fsk    = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a161b5951c5f493ced6e679b7848ce71e" title="unit in ms, range 40~640ms">delay_after_type2_fsk</a>);</div>
<div class="line">            <span class="keywordflow">if</span>( para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a> == FSK_ETSI )</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot; - RP-AS duration           = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a4a423950b129bbf1268b7bcbdf43fe89" title="The duration of RP-AS 200ms~300ms (may extend to 450ms):ETSI.">RPAS_Duration</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot; - RP-AS to FSK data period = %4d ms\n&quot;</span>, para.<a class="code" href="structTstVoipFskPara.html#a93f69fdb896784463c847bfd7de76a27" title="From end of RP-AS to start of FSK data transmission (T3:ETSI)">RPAS2FSK_Period</a>);</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;=======================================\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">            printf(<span class="stringliteral">&quot;\nExample Command of FSK param set and gen:\n\n&quot;</span>);</div>
<div class="line">            printf(<span class="stringliteral">&quot;%s set %d %d %d %d %d %d %C %d %d %d %d %d %d %d %d %d %d\n&quot;</span>,argv[0], para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a>, para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a>, para.<a class="code" href="structTstVoipFskPara.html#a030c5ac2cce1207f91ca8eac3ca4d8ae" title="channel seizure signal bit count">CS_cnt</a>, </div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#a0ff1b37b0dfcf0cf08f7d81fa004e78b" title="mark signal bit count">mark_cnt</a>, Val2Gain(para.<a class="code" href="structTstVoipFskPara.html#a0d42d27c254156a1da82843505162fc0" title="unit in dB">mark_gain</a>), Val2Gain(para.<a class="code" href="structTstVoipFskPara.html#a5e902b8ff9dcbad2e459e4bbfb61712a" title="unit in dB">space_gain</a>),</div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#a641e90d2ce11bb5ad2bbe52bbda821be" title="DTMF A, or B, or C, or D.">type2_expected_ack_tone</a>, para.<a class="code" href="structTstVoipFskPara.html#a120d8b8642f556e6eb54c0ee077baaf5" title="unit in ms">delay_after_1st_ring</a>, </div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#a4497a7464cf7e9c1050eb60f1e5ed7cf" title="unit in ms">delay_before_2nd_ring</a>, para.<a class="code" href="structTstVoipFskPara.html#a500c1c9fafd7217f05fcb5d15c69e7e4" title="unit in ms">silence_before_sas</a>,</div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#a1315cc2583de6b687660fb49c5a00fe2" title="unit in ms">sas_time</a>, para.<a class="code" href="structTstVoipFskPara.html#a6e63808f8236ab10ae05a53b31628ad1" title="unit in ms">delay_after_sas</a>,</div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#acd1797e90d6f9afc770f00858d8abac3" title="unit in ms">cas_time</a>, para.<a class="code" href="structTstVoipFskPara.html#a367786fc4153179f0971bb94409426b5" title="unit in ms">type1_delay_after_cas</a>, para.<a class="code" href="structTstVoipFskPara.html#ad7ec95fcbd92524d677e015c5eee962c" title="unit in ms">ack_waiting_time</a>,</div>
<div class="line">                           para.<a class="code" href="structTstVoipFskPara.html#a9698ba24f9b00aa469b16f320e18bde8" title="unit in ms">delay_after_ack_recv</a>, para.<a class="code" href="structTstVoipFskPara.html#a161b5951c5f493ced6e679b7848ce71e" title="unit in ms, range 40~640ms">delay_after_type2_fsk</a>);</div>
<div class="line"></div>
<div class="line">            printf(<span class="stringliteral">&quot;%s %d %d 1 1955-2011 Steve.Jobs 10060700\n\n&quot;</span>,argv[0], para.<a class="code" href="structTstVoipFskPara.html#a648e7371c9a29efe630443e59d529391" title="Channel ID.">ch_id</a>, para.<a class="code" href="structTstVoipFskPara.html#ac9a0970b6b638d1de92301407baf1c08" title="[ Area ] 0:Bellcore 1:ETSI 2:BT 3:NTT">area</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 2)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (argv[1][0] == <span class="charliteral">&#39;P&#39;</span>)</div>
<div class="line">            test_P();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argv[1][0] == <span class="charliteral">&#39;O&#39;</span>)</div>
<div class="line">            test_O();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Usage:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;To generate Caller ID:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen &lt;chid&gt; &lt;fsk_area&gt; &lt;type&gt; &lt;caller_id&gt; &lt;name&gt; &lt;date_time&gt;\n\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;To set parameters for a specific FSK standard:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen set &lt;chid&gt; &lt;fsk_area&gt; &lt;ch seizure cnt&gt; &lt;mark cnt&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;mark gain&gt; &lt;space gain&gt; &lt;type-2 expected ack tone&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;delay_after_1st_ring&gt; &lt;delay_before_2nd_ring&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;silence_before_sas&gt; &lt;sas_time&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;delay_after_sas&gt; &lt;cas_time&gt; &lt;type1_delay_after_cas&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;ack_waiting_time&gt; &lt;delay_after_ack_recv&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             &lt;delay_after_type2_fsk&gt;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;             If fsk_area=1 (ETSI): &lt;RPAS_Duration&gt; &lt;RPAS2FSK_Period&gt;\n\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;To get parameters:\n  fskgen get &lt;chid&gt; &lt;fsk_area&gt;\n\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        </div>
<div class="line">        printf(<span class="stringliteral">&quot;Parameters:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; - fsk_area: 0 -&gt; Bellcore, 1 -&gt; ETSI, 2 -&gt; BT, 3 -&gt; NTT\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; - type: 1 -&gt; type1, 2 -&gt; type2\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; - gain: +/- gain from -12.5dB range: -16dB ~ +8dB\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;   mark -&gt; logic &#39;1&#39;, space -&gt; logic &#39;0&#39;\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; - type-2 expexted ack tone: character A or B or C or D\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; - date_time: MMDDhhmm\n\n\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of getting ch0 Bellcore parameters:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen get 0 0\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of setting ch0 Bellcore FSK parameters:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen set 0 0 300 180 0 0 D 150 1000 0 330 50 80 80 160 80 150\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of generating type 1 Bellcore FSK on ch0:\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 0 1 1955-2011 Steve.Jobs 10060700\n&quot;</span>);</div>
<div class="line">        </div>
<div class="line"><span class="preprocessor">        #if 1</span></div>
<div class="line"><span class="preprocessor"></span>        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 and name, date, and time.(Bellcore)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 128 1 035780211 tester_B 01020304\n&quot;</span>); </div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 and name, date, and time.(ETSI)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 129 1 035780211 tester_E 04030201\n&quot;</span>); </div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 and name, date, and time.(NTT)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 131 1 035780211 tester_N 06020602\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 without name, date, and time.(Bellcore)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 0 1 035780211\n&quot;</span>); </div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 without name, date, and time.(ETSI)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 1 1 035780211\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Example of displaying number 035780211 without name, date, and time.(NTT)\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;  fskgen 0 3 1 035780211\n\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">        #endif</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">        </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*******************************************************</span></div>
<div class="line"><span class="comment"> * Convert Gain dB to value</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * val  0 =   8 dB</span></div>
<div class="line"><span class="comment"> * val  1 =   7 dB</span></div>
<div class="line"><span class="comment"> * val  2 =   6 dB</span></div>
<div class="line"><span class="comment"> * val  3 =   5 dB</span></div>
<div class="line"><span class="comment"> * val  4 =   4 dB</span></div>
<div class="line"><span class="comment"> * val  5 =   3 dB</span></div>
<div class="line"><span class="comment"> * val  6 =   2 dB</span></div>
<div class="line"><span class="comment"> * val  7 =   1 dB</span></div>
<div class="line"><span class="comment"> * val  8 =   0 dB</span></div>
<div class="line"><span class="comment"> * val  9 =  -1 dB</span></div>
<div class="line"><span class="comment"> * val 10 =  -2 dB</span></div>
<div class="line"><span class="comment"> * val 11 =  -3 dB</span></div>
<div class="line"><span class="comment"> * val 12 =  -4 dB</span></div>
<div class="line"><span class="comment"> * val 13 =  -5 dB</span></div>
<div class="line"><span class="comment"> * val 14 =  -6 dB</span></div>
<div class="line"><span class="comment"> * val 15 =  -7 dB</span></div>
<div class="line"><span class="comment"> * val 16 =  -8 dB</span></div>
<div class="line"><span class="comment"> * val 17 =  -9 dB</span></div>
<div class="line"><span class="comment"> * val 18 = -10 dB</span></div>
<div class="line"><span class="comment"> * val 19 = -11 dB</span></div>
<div class="line"><span class="comment"> * val 20 = -12 dB</span></div>
<div class="line"><span class="comment"> * val 21 = -13 dB</span></div>
<div class="line"><span class="comment"> * val 22 = -14 dB</span></div>
<div class="line"><span class="comment"> * val 23 = -15 dB</span></div>
<div class="line"><span class="comment"> * val 24 = -16 dB</span></div>
<div class="line"><span class="comment"> ******************************************************/</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Gain2Val(<span class="keywordtype">int</span> gain)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> inGain = gain;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* valid gain: -16dB ~ 8dB */</span></div>
<div class="line">    <span class="keywordflow">if</span> (gain &lt; -16) inGain = -16;</div>
<div class="line">    <span class="keywordflow">if</span> (gain &gt; 8)   inGain = 8;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> (8-inGain);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> Val2Gain(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> inVal = val;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* valid val 0 ~ 24 */</span></div>
<div class="line">    <span class="keywordflow">if</span> (val&gt;24) inVal = 24;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (8-inVal);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">           - fsk_area[2:0] =&gt; 0 BELLCORE, 1: ETSI, 2: BT, 3: NTT\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit8]=&gt; Auto SLIC Ringing\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit7]=&gt; FSK date &amp; time sync\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit6]=&gt; reverse polarity before caller id (For FSK)\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit5]=&gt; short ring before caller id (For FSK)\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit4]=&gt; dual alert tone before caller id (For FSK)\n&quot; \</span></div>
<div class="line"><span class="comment">        &quot;  - fsk_area[bit3]=&gt; caller id Prior Ring (FSK &amp; DTMF)\n&quot;</span></div>
<div class="line"><span class="comment">*/</span></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 3 2014 11:37:43 for VoIP Interface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
