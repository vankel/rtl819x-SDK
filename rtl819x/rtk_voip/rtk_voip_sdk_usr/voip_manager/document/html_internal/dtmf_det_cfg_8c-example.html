<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIP Interface: Main Page2</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<img src=realtek.jpg>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dtmf_det_cfg.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example for set DTMF detection parameters</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="voip__manager_8h.html" title="VoIP control API.">voip_manager.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> ShowUsage(<span class="keywordtype">char</span> *cmd)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;Usage:\n&quot;</span>);</div>
<div class="line">        printf( <span class="stringliteral">&quot;* Enable/Disable DTMF det:\n&quot;</span>  \</div>
<div class="line">            <span class="stringliteral">&quot; - %s &lt;chid&gt; &lt;dir&gt; &lt;enable&gt;\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;   - dir =&gt; 0 : TDM-side, 1: IP-side\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;   - enable =&gt; 0: disable, 1: enable\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;\n* Set DTMF det parameters:\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot; - %s &lt;chid&gt; &lt;dir&gt; &lt;threshold&gt; &lt;on_time&gt; &lt;fore_twist&gt; &lt;rev_twist&gt; &lt;freq_offset&gt;\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;   - dir =&gt; 0 : TDM-side, 1: IP-side\n&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;   - threshold =&gt; 0 ~ 40, it means 0 ~ -40 dBm\n&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;   - on_time_10ms =&gt; 3~12, it means minimum dtmf on time\n&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;   - fore_twist =&gt; 1 ~ 16, it means 0 ~ 16 dB\n&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;   - rev_twist =&gt; 1 ~ 16, it means 0 ~ 16 dB\n&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;   - freq_offset =&gt; 0 : not support, 1: support\n&quot;</span> , cmd, cmd);</div>
<div class="line">        exit(0);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc == 4)</div>
<div class="line">    {</div>
<div class="line">        <a name="a0"></a><a class="code" href="group__TAPI__DSP__DTMF__DET.html#gab637c7c0b2489e984ebb42b63d8bc1ba" title="Enable/Disable DTMF detection.">rtk_SetDtmfCfg</a>(atoi(argv[1]), atoi(argv[3]), atoi(argv[2]));</div>
<div class="line">        printf(<span class="stringliteral">&quot;set DTMF det = %s, ch%d, dir%d\n&quot;</span>, atoi(argv[3]) ? <span class="stringliteral">&quot;On&quot;</span> : <span class="stringliteral">&quot;Off&quot;</span>, atoi(argv[1]), atoi(argv[2]));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 7)</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>        <a name="a1"></a><a class="code" href="group__TAPI__DSP__DTMF__DET.html#gaff2a9fd5e97130e675051bf95e281a8f" title="Set DTMF detection parameters.">rtk_SetDtmfDetParam</a>(atoi(argv[1]), atoi(argv[2]), atoi(argv[3]), atoi(argv[4]), atoi(argv[5]), atoi(argv[6]));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        <a name="_a2"></a><a class="code" href="structTstDtmfDetPara.html" title="Structure for DTMF detection parameter ioctl.">TstDtmfDetPara</a> stDtmfDetPara;</div>
<div class="line"></div>
<div class="line">        stDtmfDetPara.<a name="a3"></a><a class="code" href="structTstDtmfDetPara.html#a508de6d528c35032b0a7e0422b0edd7a" title="Channel ID.">ch_id</a> = atoi(argv[1]);</div>
<div class="line">        stDtmfDetPara.<a name="a4"></a><a class="code" href="structTstDtmfDetPara.html#a8d4e0d9d49fa97f2f19a8019e2ba7f04" title="DTMF det direction, 0-&gt; TDM, 1-&gt; IP.">dir</a> = atoi(argv[2]);</div>
<div class="line">        stDtmfDetPara.<a name="a5"></a><a class="code" href="structTstDtmfDetPara.html#a607b74cdc4595756b5ee946062f5614e" title="Update DTMF det threshold flag, 0-&gt; no update, 1-&gt; update.">thres_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a name="a6"></a><a class="code" href="structTstDtmfDetPara.html#a8a18076c3f84ae9d0d0b90863309348e" title="DTMF det threshold, Available range: 0 to 40 ( 0 ~ -40 dBm)">thres</a> = atoi(argv[3]);</div>
<div class="line">        stDtmfDetPara.<a name="a7"></a><a class="code" href="structTstDtmfDetPara.html#aade3049b157d83a66b7a759f8862947b" title="Update DTMF det on time flag, 0-&gt; no update, 1-&gt; update.">on_time_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a name="a8"></a><a class="code" href="structTstDtmfDetPara.html#aac1a0984d069618cc1863846bf749c36" title="DTMF det on time (uint: 10ms)">on_time</a> = atoi(argv[4]);</div>
<div class="line">        stDtmfDetPara.<a name="a9"></a><a class="code" href="structTstDtmfDetPara.html#a001ebbf5c6d8424fe10d3b08b07e2081" title="Update DTMF det acceptable twist flag, 0-&gt; no update, 1-&gt; updates.">twist_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a name="a10"></a><a class="code" href="structTstDtmfDetPara.html#a26180d4adfa93e31b78ae2398eb3e531" title="DTMF det acceptable fore-twist (dB), Available range: 1 to 12 dB.">fore_twist</a> = atoi(argv[5]);</div>
<div class="line">        stDtmfDetPara.<a name="a11"></a><a class="code" href="structTstDtmfDetPara.html#ae76efe38f2e99294e42ce8f9ed68ba10" title="DTMF det acceptable rev-twist (dB), Available range: 1 to 12 dB.">rev_twist</a> = atoi(argv[6]);</div>
<div class="line">        stDtmfDetPara.<a name="a12"></a><a class="code" href="structTstDtmfDetPara.html#a90cbebe059e9758ae8f3356fb4b595f4" title="Update DTMF freq. offset flag, 0-&gt; no update, 1-&gt; update.">freq_offset_upd</a> = 0;</div>
<div class="line">        </div>
<div class="line">        <a name="a13"></a><a class="code" href="group__TAPI__DSP__DTMF__DET.html#ga0c1ef527343998290d24db9780c60f56" title="Set DTMF detection parameters.">rtk_SetDtmfDetParamUpdate</a>(&amp;stDtmfDetPara);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 8)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structTstDtmfDetPara.html" title="Structure for DTMF detection parameter ioctl.">TstDtmfDetPara</a> stDtmfDetPara;</div>
<div class="line"></div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a508de6d528c35032b0a7e0422b0edd7a" title="Channel ID.">ch_id</a> = atoi(argv[1]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a8d4e0d9d49fa97f2f19a8019e2ba7f04" title="DTMF det direction, 0-&gt; TDM, 1-&gt; IP.">dir</a> = atoi(argv[2]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a607b74cdc4595756b5ee946062f5614e" title="Update DTMF det threshold flag, 0-&gt; no update, 1-&gt; update.">thres_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a8a18076c3f84ae9d0d0b90863309348e" title="DTMF det threshold, Available range: 0 to 40 ( 0 ~ -40 dBm)">thres</a> = atoi(argv[3]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#aade3049b157d83a66b7a759f8862947b" title="Update DTMF det on time flag, 0-&gt; no update, 1-&gt; update.">on_time_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#aac1a0984d069618cc1863846bf749c36" title="DTMF det on time (uint: 10ms)">on_time</a> = atoi(argv[4]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a001ebbf5c6d8424fe10d3b08b07e2081" title="Update DTMF det acceptable twist flag, 0-&gt; no update, 1-&gt; updates.">twist_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a26180d4adfa93e31b78ae2398eb3e531" title="DTMF det acceptable fore-twist (dB), Available range: 1 to 12 dB.">fore_twist</a> = atoi(argv[5]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#ae76efe38f2e99294e42ce8f9ed68ba10" title="DTMF det acceptable rev-twist (dB), Available range: 1 to 12 dB.">rev_twist</a> = atoi(argv[6]);</div>
<div class="line">        stDtmfDetPara.<a class="code" href="structTstDtmfDetPara.html#a90cbebe059e9758ae8f3356fb4b595f4" title="Update DTMF freq. offset flag, 0-&gt; no update, 1-&gt; update.">freq_offset_upd</a> = 1;</div>
<div class="line">        stDtmfDetPara.<a name="a14"></a><a class="code" href="structTstDtmfDetPara.html#ae5cb141134fa71ec3b0e0c1255918393" title="DTMF freq. offset support flag, 0-&gt; not support, 1-&gt; support.">freq_offset</a> = atoi(argv[7]);</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="group__TAPI__DSP__DTMF__DET.html#ga0c1ef527343998290d24db9780c60f56" title="Set DTMF detection parameters.">rtk_SetDtmfDetParamUpdate</a>(&amp;stDtmfDetPara);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        ShowUsage(argv[0]);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 3 2014 11:37:43 for VoIP Interface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
